# 前言

欢迎阅读《Agentic Design Patterns: A Hands-On Guide to Building Intelligent Systems》（智能体设计模式：构建智能系统实践指南）。当我们纵观现代人工智能的格局时，我们看到了从简单的反应式程序到能够理解上下文、做出决策并与其环境和其他系统动态交互的复杂自主实体的清晰演进。这些就是智能体以及它们组成的智能体系统。

强大的大型语言模型（LLM）的出现为理解和生成文本和媒体等类人内容提供了前所未有的能力，成为许多这些智能体的认知引擎。然而，将这些能力编排成能够可靠实现复杂目标的系统，需要的不仅仅是一个强大的模型。它需要结构、设计以及对智能体如何感知、规划、行动和交互的深思熟虑的方法。

将构建智能系统视为在画布上创作复杂的艺术作品或工程。这个画布不是空白的视觉空间，而是提供环境和工具供智能体存在和运行的基础设施和框架。这是你构建智能应用程序的基础，管理状态、通信、工具访问和逻辑流程。

在这个智能体画布上有效构建，需要的不仅仅是简单地将组件组合在一起。它需要理解经过验证的技术——**模式**——这些模式解决了设计和实现智能体行为时的常见挑战。正如建筑模式指导建筑物的建造，或设计模式结构化软件，智能体设计模式为你在选择的画布上将智能体变为现实时遇到的反复出现的问题提供可重用的解决方案。

## 什么是智能体系统？

核心而言，智能体系统是一个计算实体，旨在感知其环境（数字和潜在的物理环境），根据这些感知以及一组预定义或学习的目标做出明智的决策，并自主执行行动以实现这些目标。与遵循严格、逐步指令的传统软件不同，智能体表现出一定程度的灵活性和主动性。

想象你需要一个系统来管理客户询问。传统系统可能遵循固定脚本。然而，智能体系统可以感知客户查询的细微差别，访问知识库，与其他内部系统（如订单管理）交互，可能提出澄清问题，并主动解决问题，甚至可能预测未来需求。这些智能体在你的应用程序基础设施的画布上运行，利用可用的服务和数据。

智能体系统通常具有以下特征：**自主性**，允许它们在无需持续人工监督的情况下行动；**主动性**，主动启动朝着其目标的行动；以及**反应性**，有效响应环境的变化。它们从根本上来说是**目标导向的**，不断朝着目标工作。一个关键能力是**工具使用**，使它们能够与外部 API、数据库或服务交互——有效地扩展到其直接画布之外。它们拥有**内存**，在交互之间保留信息，并可以与用户、其他系统甚至在同一或连接的画布上运行的其他智能体进行**通信**。

有效实现这些特征会带来显著的复杂性。智能体如何在其画布上的多个步骤中维护状态？它如何决定*何时*以及*如何*使用工具？不同智能体之间的通信如何管理？你如何构建系统的弹性以处理意外结果或错误？

## 为什么模式在智能体开发中很重要

这种复杂性正是智能体设计模式不可或缺的原因。它们不是僵化的规则，而是经过实战检验的模板或蓝图，为智能体领域中的标准设计和实现挑战提供了经过验证的方法。通过识别和应用这些设计模式，你可以获得增强你在画布上构建的智能体的结构、可维护性、可靠性和效率的解决方案。

使用设计模式可以帮助你避免为管理对话流程、集成外部能力或协调多个智能体行动等任务重新发明基本解决方案。它们提供通用语言和结构，使你的智能体逻辑更清晰，更容易被他人（以及未来的你自己）理解和维护。实现用于错误处理或状态管理的模式直接有助于构建更健壮和可靠的系统。利用这些已建立的方法可以加速你的开发过程，使你能够专注于应用程序的独特方面，而不是智能体行为的基础机制。

本书提取了 21 个关键设计模式，这些模式代表了在各种技术画布上构建复杂智能体的基本构建块和技术。理解和应用这些模式将显著提升你有效设计和实现智能系统的能力。

## 本书概述及使用方法

本书《Agentic Design Patterns: A Hands-On Guide to Building Intelligent Systems》旨在成为实用且易于访问的资源。它的主要重点是清楚地解释每个智能体模式，并提供具体的、可运行的代码示例来演示其实现。在 21 个专门章节中，我们将探索各种设计模式，从结构化顺序操作（Prompt Chaining，提示链）和外部交互（Tool Use，工具使用）等基础概念，到协作工作（Multi-Agent Collaboration，多智能体协作）和自我改进（Self-Correction，自我纠正）等高级主题。

本书按章节组织，每章深入探讨一个智能体模式。在每章中，你将找到：

* 详细的**模式概述**，清楚地解释模式及其在智能体设计中的作用。  
* **实际应用与用例**部分，说明模式在现实世界中非常有价值以及它带来的好处的场景。  
* **实践代码示例**，提供实用的、可运行的代码，演示使用主要智能体开发框架实现模式。这是你将看到如何在技术画布的上下文中应用模式的地方。  
* **关键要点**，总结最重要的点以供快速回顾。  
* **参考资料**，提供进一步探索的资源，用于深入学习模式和相关概念。

虽然章节按顺序排列以逐步构建概念，但你可以自由地将本书用作参考，跳转到解决你在自己的智能体开发项目中面临的特定挑战的章节。附录提供了对高级提示技术、在现实环境中应用 AI 智能体的原则以及基本智能体框架概述的全面介绍。为了补充这一点，包含了实用的仅在线教程，提供了使用特定平台（如 AgentSpace）和命令行界面构建智能体的分步指导。全书强调实际应用；我们强烈鼓励你运行代码示例，进行实验，并调整它们以在你选择的画布上构建自己的智能系统。

我经常听到的一个很好的问题是："AI 变化如此之快，为什么要写一本可能很快就过时的书？"我的动机实际上是相反的。正是因为事情变化如此之快，我们需要退一步，识别正在巩固的基本原则。像 RAG、Reflection、Routing、Memory 以及我讨论的其他模式，正在成为基本的构建块。本书是邀请你反思这些核心思想，它们提供了我们需要构建的基础。人类需要这些关于基础模式的反思时刻。

## 使用的框架介绍

为了为我们的代码示例提供有形的"画布"（另见附录），我们将主要利用三个主要的智能体开发框架。**LangChain** 及其有状态扩展 **LangGraph** 提供了一种灵活的方式来链接语言模型和其他组件，为构建复杂的操作序列和图提供了强大的画布。**Crew AI** 提供了一个专门为编排多个 AI 智能体、角色和任务而设计的结构化框架，作为一个特别适合协作智能体系统的画布。**Google Agent Developer Kit (Google ADK)** 提供了用于构建、评估和部署智能体的工具和组件，提供了另一个有价值的画布，通常与 Google 的 AI 基础设施集成。

这些框架代表了智能体开发画布的不同方面，每个都有自己的优势。通过展示这些工具的示例，你将更广泛地了解如何应用模式，无论你为智能体系统选择什么特定的技术环境。这些示例旨在清楚地说明模式的核心逻辑及其在框架画布上的实现，专注于清晰性和实用性。

到本书结束时，你不仅将理解 21 个基本智能体模式背后的基本概念，还将拥有实际的知识和代码示例来有效应用它们，使你能在你选择的开发画布上构建更智能、更有能力和更自主的系统。让我们开始这段实践之旅！
