# ç¬¬ 11 ç« ï¼šGoal Setting and Monitoringï¼ˆç›®æ ‡è®¾ç½®å’Œç›‘æ§ï¼‰

å¯¹äº AI æ™ºèƒ½ä½“æ¥è¯´ï¼Œè¦çœŸæ­£æœ‰æ•ˆå’Œæœ‰ç›®çš„ï¼Œå®ƒä»¬éœ€è¦çš„ä¸ä»…ä»…æ˜¯å¤„ç†ä¿¡æ¯æˆ–ä½¿ç”¨å·¥å…·çš„èƒ½åŠ›ï¼›å®ƒä»¬éœ€è¦æ˜ç¡®çš„æ–¹å‘æ„Ÿå’ŒçŸ¥é“æ˜¯å¦çœŸæ­£æˆåŠŸçš„æ–¹æ³•ã€‚è¿™å°±æ˜¯ç›®æ ‡è®¾ç½®å’Œç›‘æ§ï¼ˆGoal Setting and Monitoringï¼‰æ¨¡å¼å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å®ƒæ˜¯å…³äºä¸ºæ™ºèƒ½ä½“æä¾›è¦å®ç°çš„ç‰¹å®šç›®æ ‡ï¼Œå¹¶ä¸ºå…¶é…å¤‡è·Ÿè¸ªå…¶è¿›åº¦å’Œç¡®å®šæ˜¯å¦å·²å®ç°è¿™äº›ç›®æ ‡çš„æ–¹æ³•ã€‚

## ç›®æ ‡è®¾ç½®å’Œç›‘æ§æ¨¡å¼æ¦‚è¿°

æƒ³æƒ³è§„åˆ’ä¸€æ¬¡æ—…è¡Œã€‚æ‚¨ä¸ä¼šåªæ˜¯è‡ªå‘åœ°å‡ºç°åœ¨ç›®çš„åœ°ã€‚æ‚¨å†³å®šè¦å»å“ªé‡Œï¼ˆç›®æ ‡çŠ¶æ€ï¼‰ï¼Œç¡®å®šä»å“ªé‡Œå¼€å§‹ï¼ˆåˆå§‹çŠ¶æ€ï¼‰ï¼Œè€ƒè™‘å¯ç”¨é€‰é¡¹ï¼ˆäº¤é€šã€è·¯çº¿ã€é¢„ç®—ï¼‰ï¼Œç„¶åè§„åˆ’ä¸€ç³»åˆ—æ­¥éª¤ï¼šé¢„è®¢ç¥¨ã€æ‰“åŒ…è¡Œæã€å‰å¾€æœºåœº/è½¦ç«™ã€ç™»æœºã€åˆ°è¾¾ã€æ‰¾ä½å®¿ç­‰ã€‚è¿™ä¸ªé€æ­¥è¿‡ç¨‹ï¼Œé€šå¸¸è€ƒè™‘ä¾èµ–å…³ç³»å’Œçº¦æŸï¼Œä»æ ¹æœ¬ä¸Šæ¥è¯´å°±æ˜¯æˆ‘ä»¬åœ¨æ™ºèƒ½ä½“ç³»ç»Ÿä¸­æ‰€è°“çš„è§„åˆ’ã€‚

åœ¨ AI æ™ºèƒ½ä½“çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè§„åˆ’é€šå¸¸æ¶‰åŠæ™ºèƒ½ä½“æ¥å—é«˜çº§ç›®æ ‡å¹¶è‡ªä¸»æˆ–åŠè‡ªä¸»åœ°ç”Ÿæˆä¸€ç³»åˆ—ä¸­é—´æ­¥éª¤æˆ–å­ç›®æ ‡ã€‚ç„¶åå¯ä»¥é¡ºåºæ‰§è¡Œè¿™äº›æ­¥éª¤æˆ–åœ¨æ›´å¤æ‚çš„æµç¨‹ä¸­æ‰§è¡Œï¼Œå¯èƒ½æ¶‰åŠå…¶ä»–æ¨¡å¼ï¼Œå¦‚å·¥å…·ä½¿ç”¨ã€è·¯ç”±æˆ–å¤šæ™ºèƒ½ä½“åä½œã€‚è§„åˆ’æœºåˆ¶å¯èƒ½æ¶‰åŠå¤æ‚çš„æœç´¢ç®—æ³•ã€é€»è¾‘æ¨ç†ï¼Œæˆ–è¶Šæ¥è¶Šå¤šåœ°åˆ©ç”¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„èƒ½åŠ›ï¼ŒåŸºäºå…¶è®­ç»ƒæ•°æ®å’Œå¯¹ä»»åŠ¡çš„ç†è§£ç”Ÿæˆåˆç†ä¸”æœ‰æ•ˆçš„è®¡åˆ’ã€‚

è‰¯å¥½çš„è§„åˆ’èƒ½åŠ›ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿå¤„ç†ä¸æ˜¯ç®€å•çš„å•æ­¥æŸ¥è¯¢çš„é—®é¢˜ã€‚å®ƒä½¿å®ƒä»¬èƒ½å¤Ÿå¤„ç†å¤šæ–¹é¢çš„è¯·æ±‚ï¼Œé€šè¿‡é‡æ–°è§„åˆ’é€‚åº”å˜åŒ–çš„æƒ…å†µï¼Œå¹¶ç¼–æ’å¤æ‚çš„å·¥ä½œæµã€‚è¿™æ˜¯ä¸€ä¸ªåŸºç¡€æ¨¡å¼ï¼Œæ”¯æ’‘ç€è®¸å¤šé«˜çº§æ™ºèƒ½ä½“è¡Œä¸ºï¼Œå°†ç®€å•çš„ååº”ç³»ç»Ÿè½¬å˜ä¸ºå¯ä»¥ä¸»åŠ¨æœç€å®šä¹‰çš„ç›®æ ‡å·¥ä½œçš„ç³»ç»Ÿã€‚

## å®é™…åº”ç”¨ä¸ç”¨ä¾‹

ç›®æ ‡è®¾ç½®å’Œç›‘æ§æ¨¡å¼å¯¹äºæ„å»ºèƒ½å¤Ÿåœ¨å¤æ‚çš„ã€ç°å®ä¸–ç•Œçš„åœºæ™¯ä¸­è‡ªä¸»å’Œå¯é è¿è¡Œçš„æ™ºèƒ½ä½“è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®é™…åº”ç”¨ï¼š

* **å®¢æˆ·æ”¯æŒè‡ªåŠ¨åŒ–ï¼š** æ™ºèƒ½ä½“çš„ç›®æ ‡å¯èƒ½æ˜¯"è§£å†³å®¢æˆ·çš„è®¡è´¹è¯¢é—®"ã€‚å®ƒç›‘æ§å¯¹è¯ã€æ£€æŸ¥æ•°æ®åº“æ¡ç›®ï¼Œå¹¶ä½¿ç”¨å·¥å…·è°ƒæ•´è®¡è´¹ã€‚é€šè¿‡ç¡®è®¤è®¡è´¹æ›´æ”¹å’Œæ”¶åˆ°ç§¯æçš„å®¢æˆ·åé¦ˆæ¥ç›‘æ§æˆåŠŸã€‚å¦‚æœé—®é¢˜æœªè§£å†³ï¼Œå®ƒä¼šå‡çº§ã€‚  
* **ä¸ªæ€§åŒ–å­¦ä¹ ç³»ç»Ÿï¼š** å­¦ä¹ æ™ºèƒ½ä½“çš„ç›®æ ‡å¯èƒ½æ˜¯"æé«˜å­¦ç”Ÿå¯¹ä»£æ•°çš„ç†è§£"ã€‚å®ƒç›‘æ§å­¦ç”Ÿåœ¨ç»ƒä¹ ä¸­çš„è¿›åº¦ã€è°ƒæ•´æ•™å­¦ææ–™ï¼Œå¹¶è·Ÿè¸ªå‡†ç¡®æ€§å’Œå®Œæˆæ—¶é—´ç­‰æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚æœå­¦ç”Ÿé‡åˆ°å›°éš¾ï¼Œåˆ™è°ƒæ•´å…¶æ–¹æ³•ã€‚  
* **é¡¹ç›®ç®¡ç†åŠ©æ‰‹ï¼š** æ™ºèƒ½ä½“å¯èƒ½è¢«è¦æ±‚"ç¡®ä¿é¡¹ç›®é‡Œç¨‹ç¢‘ X åœ¨ Y æ—¥æœŸä¹‹å‰å®Œæˆ"ã€‚å®ƒç›‘æ§ä»»åŠ¡çŠ¶æ€ã€å›¢é˜Ÿé€šä¿¡å’Œèµ„æºå¯ç”¨æ€§ï¼Œæ ‡è®°å»¶è¿Ÿå¹¶åœ¨ç›®æ ‡å¤„äºé£é™©æ—¶å»ºè®®çº æ­£æªæ–½ã€‚  
* **è‡ªåŠ¨åŒ–äº¤æ˜“æœºå™¨äººï¼š** äº¤æ˜“æ™ºèƒ½ä½“çš„ç›®æ ‡å¯èƒ½æ˜¯"åœ¨é£é™©æ‰¿å—èƒ½åŠ›èŒƒå›´å†…æœ€å¤§åŒ–æŠ•èµ„ç»„åˆæ”¶ç›Š"ã€‚å®ƒæŒç»­ç›‘æ§å¸‚åœºæ•°æ®ã€å½“å‰æŠ•èµ„ç»„åˆä»·å€¼å’Œé£é™©æŒ‡æ ‡ï¼Œå½“æ¡ä»¶ä¸å…¶ç›®æ ‡ä¸€è‡´æ—¶æ‰§è¡Œäº¤æ˜“ï¼Œå¦‚æœé£é™©é˜ˆå€¼è¢«çªç ´ï¼Œåˆ™è°ƒæ•´ç­–ç•¥ã€‚  
* **æœºå™¨äººå’Œè‡ªåŠ¨é©¾é©¶è½¦è¾†ï¼š** è‡ªåŠ¨é©¾é©¶è½¦è¾†çš„ä¸»è¦ç›®æ ‡æ˜¯"å®‰å…¨åœ°å°†ä¹˜å®¢ä» A è¿è¾“åˆ° B"ã€‚å®ƒä¸æ–­ç›‘æ§å…¶ç¯å¢ƒï¼ˆå…¶ä»–è½¦è¾†ã€è¡Œäººã€äº¤é€šä¿¡å·ï¼‰ã€è‡ªèº«çŠ¶æ€ï¼ˆé€Ÿåº¦ã€ç‡ƒæ–™ï¼‰ä»¥åŠæ²¿è®¡åˆ’è·¯çº¿çš„è¿›åº¦ï¼Œè°ƒæ•´å…¶é©¾é©¶è¡Œä¸ºä»¥å®‰å…¨é«˜æ•ˆåœ°å®ç°ç›®æ ‡ã€‚  
* **å†…å®¹å®¡æ ¸ï¼š** æ™ºèƒ½ä½“çš„ç›®æ ‡å¯èƒ½æ˜¯"è¯†åˆ«å¹¶åˆ é™¤å¹³å° X ä¸Šçš„æœ‰å®³å†…å®¹"ã€‚å®ƒç›‘æ§ä¼ å…¥å†…å®¹ã€åº”ç”¨åˆ†ç±»æ¨¡å‹ï¼Œå¹¶è·Ÿè¸ªè¯¯æŠ¥/æ¼æŠ¥ç­‰æŒ‡æ ‡ï¼Œè°ƒæ•´å…¶è¿‡æ»¤æ ‡å‡†æˆ–å°†æ¨¡ç³Šæ¡ˆä¾‹å‡çº§ç»™äººå·¥å®¡æŸ¥å‘˜ã€‚

æ­¤æ¨¡å¼å¯¹äºéœ€è¦å¯é è¿è¡Œã€å®ç°ç‰¹å®šç»“æœå¹¶é€‚åº”åŠ¨æ€æ¡ä»¶çš„æ™ºèƒ½ä½“è‡³å…³é‡è¦ï¼Œä¸ºæ™ºèƒ½è‡ªæˆ‘ç®¡ç†æä¾›äº†å¿…è¦çš„æ¡†æ¶ã€‚

## å®è·µä»£ç ç¤ºä¾‹

ä¸ºäº†è¯´æ˜ç›®æ ‡è®¾ç½®å’Œç›‘æ§æ¨¡å¼ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨ LangChain å’Œ OpenAI API çš„ç¤ºä¾‹ã€‚æ­¤ Python è„šæœ¬æ¦‚è¿°äº†ä¸€ä¸ªè®¾è®¡ç”¨äºç”Ÿæˆå’Œæ”¹è¿› Python ä»£ç çš„è‡ªä¸» AI æ™ºèƒ½ä½“ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸ºæŒ‡å®šé—®é¢˜ç”Ÿæˆè§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿éµå®ˆç”¨æˆ·å®šä¹‰çš„è´¨é‡åŸºå‡†ã€‚

å®ƒé‡‡ç”¨"ç›®æ ‡è®¾ç½®å’Œç›‘æ§"æ¨¡å¼ï¼Œä¸ä»…ä»…ç”Ÿæˆä¸€æ¬¡ä»£ç ï¼Œè€Œæ˜¯è¿›å…¥åˆ›å»ºã€è‡ªæˆ‘è¯„ä¼°å’Œæ”¹è¿›çš„è¿­ä»£å¾ªç¯ã€‚æ™ºèƒ½ä½“çš„æˆåŠŸç”±å…¶è‡ªå·±çš„ AI é©±åŠ¨åˆ¤æ–­æ¥è¡¡é‡ï¼Œå³ç”Ÿæˆçš„ä»£ç æ˜¯å¦æˆåŠŸæ»¡è¶³åˆå§‹ç›®æ ‡ã€‚æœ€ç»ˆè¾“å‡ºæ˜¯ä¸€ä¸ªç²¾ç‚¼çš„ã€æ³¨é‡Šçš„ã€å¯ç«‹å³ä½¿ç”¨çš„ Python æ–‡ä»¶ï¼Œä»£è¡¨äº†æ­¤æ”¹è¿›è¿‡ç¨‹çš„é¡¶å³°ã€‚

 **ä¾èµ–é¡¹**ï¼š

```python
pip install langchain_openai openai python-dotenv .env file with key in OPENAI_API_KEY
```

æ‚¨å¯ä»¥é€šè¿‡æƒ³è±¡ä¸€ä¸ªè¢«åˆ†é…åˆ°é¡¹ç›®çš„è‡ªä¸» AI ç¨‹åºå‘˜æ¥æœ€å¥½åœ°ç†è§£æ­¤è„šæœ¬ï¼ˆè§å›¾ 1ï¼‰ã€‚å½“æ‚¨å‘ AI æä¾›è¯¦ç»†çš„é¡¹ç›®ç®€ä»‹æ—¶ï¼Œè¿‡ç¨‹å¼€å§‹ï¼Œè¿™æ˜¯å®ƒéœ€è¦è§£å†³çš„ç‰¹å®šç¼–ç é—®é¢˜ã€‚

```python
# MIT License
# Copyright (c) 2025 Mahtab Syed
# https://www.linkedin.com/in/mahtabsyed/

"""
Hands-On Code Example - Iteration 2
-  To illustrate the Goal Setting and Monitoring pattern, we have an example using LangChain and OpenAI APIs:

Objective: Build an AI Agent which can write code for a specified use case based on specified goals:
-  Accepts a coding problem (use case) in code or can be as input.
-  Accepts a list of goals (e.g., "simple", "tested", "handles edge cases")  in code or can be input.
-  Uses an LLM (like GPT-4o) to generate and refine Python code until the goals are met. (I am using max 5 iterations, this could be based on a set goal as well)
-  To check if we have met our goals I am asking the LLM to judge this and answer just True or False which makes it easier to stop the iterations.
-  Saves the final code in a .py file with a clean filename and a header comment.
"""

import os
import random
import re
from pathlib import Path

from langchain_openai import ChatOpenAI
from dotenv import load_dotenv, find_dotenv


# ğŸ” Load environment variables
_ = load_dotenv(find_dotenv())
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
if not OPENAI_API_KEY:
    raise EnvironmentError("âŒ Please set the OPENAI_API_KEY environment variable.")

# âœ… Initialize OpenAI model
print("ğŸ“¡ Initializing OpenAI LLM (gpt-4o)...")
llm = ChatOpenAI(
    model="gpt-4o",  # If you dont have access to got-4o use other OpenAI LLMs
    temperature=0.3,
    openai_api_key=OPENAI_API_KEY,
)


# --- Utility Functions ---
def generate_prompt(
    use_case: str, goals: list[str], previous_code: str = "", feedback: str = ""
) -> str:
    print("ğŸ“ Constructing prompt for code generation...")
    base_prompt = f"""
You are an AI coding agent. Your job is to write Python code based on the following use case:

Use Case: {use_case}

Your goals are:
{chr(10).join(f"- {g.strip()}" for g in goals)}
"""
    if previous_code:
        print("ğŸ”„ Adding previous code to the prompt for refinement.")
        base_prompt += f"\nPreviously generated code:\n{previous_code}"
    if feedback:
        print("ğŸ“‹ Including feedback for revision.")
        base_prompt += f"\nFeedback on previous version:\n{feedback}\n"

    base_prompt += "\nPlease return only the revised Python code. Do not include comments or explanations outside the code."
    return base_prompt


def get_code_feedback(code: str, goals: list[str]) -> str:
    print("ğŸ” Evaluating code against the goals...")
    feedback_prompt = f"""
You are a Python code reviewer. A code snippet is shown below. Based on the following goals:

{chr(10).join(f"- {g.strip()}" for g in goals)}

Please critique this code and identify if the goals are met. Mention if improvements are needed for clarity, simplicity, correctness, edge case handling, or test coverage.

Code:
{code}
"""
    return llm.invoke(feedback_prompt)


def goals_met(feedback_text: str, goals: list[str]) -> bool:
    """
    Uses the LLM to evaluate whether the goals have been met based on the feedback text.
    Returns True or False (parsed from LLM output).
    """
    review_prompt = f"""
You are an AI reviewer.

Here are the goals:
{chr(10).join(f"- {g.strip()}" for g in goals)}

Here is the feedback on the code:
\"\"\"
{feedback_text}
\"\"\"

Based on the feedback above, have the goals been met?

Respond with only one word: True or False.
"""
    response = llm.invoke(review_prompt).content.strip().lower()
    return response == "true"


def clean_code_block(code: str) -> str:
    lines = code.strip().splitlines()
    if lines and lines[0].strip().startswith("```"):
        lines = lines[1:]
    if lines and lines[-1].strip() == "```":
        lines = lines[:-1]
    return "\n".join(lines).strip()


def add_comment_header(code: str, use_case: str) -> str:
    comment = f"# This Python program implements the following use case:\n# {use_case.strip()}\n"
    return comment + "\n" + code


def to_snake_case(text: str) -> str:
    text = re.sub(r"[^a-zA-Z0-9 ]", "", text)
    return re.sub(r"\s+", "_", text.strip().lower())


def save_code_to_file(code: str, use_case: str) -> str:
    print("ğŸ’¾ Saving final code to file...")

    summary_prompt = (
        f"Summarize the following use case into a single lowercase word or phrase, "
        f"no more than 10 characters, suitable for a Python filename:\n\n{use_case}"
    )
    raw_summary = llm.invoke(summary_prompt).content.strip()
    short_name = re.sub(r"[^a-zA-Z0-9_]", "", raw_summary.replace(" ", "_").lower())[:10]

    random_suffix = str(random.randint(1000, 9999))
    filename = f"{short_name}_{random_suffix}.py"
    filepath = Path.cwd() / filename

    with open(filepath, "w") as f:
        f.write(code)

    print(f"âœ… Code saved to: {filepath}")
    return str(filepath)


# --- Main Agent Function ---
def run_code_agent(use_case: str, goals_input: str, max_iterations: int = 5) -> str:
    goals = [g.strip() for g in goals_input.split(",")]

    print(f"\nğŸ¯ Use Case: {use_case}")
    print("ğŸ¯ Goals:")
    for g in goals:
        print(f"  - {g}")

    previous_code = ""
    feedback = ""

    for i in range(max_iterations):
        print(f"\n=== ğŸ” Iteration {i + 1} of {max_iterations} ===")
        prompt = generate_prompt(
            use_case,
            goals,
            previous_code,
            feedback if isinstance(feedback, str) else feedback.content,
        )

        print("ğŸš§ Generating code...")
        code_response = llm.invoke(prompt)
        raw_code = code_response.content.strip()
        code = clean_code_block(raw_code)
        print("\nğŸ§¾ Generated Code:\n" + "-" * 50 + f"\n{code}\n" + "-" * 50)

        print("\nğŸ“¤ Submitting code for feedback review...")
        feedback = get_code_feedback(code, goals)
        feedback_text = feedback.content.strip()
        print("\nğŸ“¥ Feedback Received:\n" + "-" * 50 + f"\n{feedback_text}\n" + "-" * 50)

        if goals_met(feedback_text, goals):
            print("âœ… LLM confirms goals are met. Stopping iteration.")
            break

        print("ğŸ› ï¸ Goals not fully met. Preparing for next iteration...")
        previous_code = code

    final_code = add_comment_header(code, use_case)
    return save_code_to_file(final_code, use_case)


# --- CLI Test Run ---
if __name__ == "__main__":
    print("\nğŸ§  Welcome to the AI Code Generation Agent")

    # Example 1
    use_case_input = "Write code to find BinaryGap of a given positive integer"
    goals_input = "Code simple to understand, Functionally correct, Handles comprehensive edge cases, Takes positive integer input only, prints the results with few examples"
    run_code_agent(use_case_input, goals_input)

    # Example 2
    # use_case_input = "Write code to count the number of files in current directory and all its nested sub directories, and print the total count"
    # goals_input = (
    #     "Code simple to understand, Functionally correct, Handles comprehensive edge cases, Ignore recommendations for performance, Ignore recommendations for test suite use like unittest or pytest"
    # )
    # run_code_agent(use_case_input, goals_input)

    # Example 3
    # use_case_input = "Write code which takes a command line input of a word doc or docx file and opens it and counts the number of words, and characters in it and prints all"
    # goals_input = "Code simple to understand, Functionally correct, Handles edge cases"
    # run_code_agent(use_case_input, goals_input)
```

ä¸æ­¤ç®€ä»‹ä¸€èµ·ï¼Œæ‚¨æä¾›äº†ä¸€ä¸ªä¸¥æ ¼çš„è´¨é‡æ£€æŸ¥æ¸…å•ï¼Œå®ƒä»£è¡¨äº†æœ€ç»ˆä»£ç å¿…é¡»æ»¡è¶³çš„ç›®æ ‡â€”â€”å¦‚"è§£å†³æ–¹æ¡ˆå¿…é¡»ç®€å•"ã€"å®ƒå¿…é¡»åœ¨åŠŸèƒ½ä¸Šæ­£ç¡®"æˆ–"å®ƒéœ€è¦å¤„ç†æ„å¤–çš„è¾¹ç¼˜æƒ…å†µ"ç­‰æ ‡å‡†ã€‚

![Goal Setting and Monitor example](../assets/Goal_Setting_and_Monitoring.png)

å›¾ 1ï¼šç›®æ ‡è®¾ç½®å’Œç›‘æ§ç¤ºä¾‹

æœ‰äº†è¿™ä¸ªä»»åŠ¡ï¼ŒAI ç¨‹åºå‘˜å¼€å§‹å·¥ä½œå¹¶äº§ç”Ÿå…¶ç¬¬ä¸€ç‰ˆä»£ç è‰ç¨¿ã€‚ç„¶è€Œï¼Œå®ƒä¸æ˜¯ç«‹å³æäº¤æ­¤åˆå§‹ç‰ˆæœ¬ï¼Œè€Œæ˜¯æš‚åœæ‰§è¡Œä¸€ä¸ªå…³é”®æ­¥éª¤ï¼šä¸¥æ ¼çš„è‡ªæˆ‘å®¡æŸ¥ã€‚å®ƒä»”ç»†åœ°å°†å…¶è‡ªå·±çš„åˆ›ä½œä¸æ‚¨æä¾›çš„è´¨é‡æ£€æŸ¥æ¸…å•ä¸Šçš„æ¯ä¸€é¡¹è¿›è¡Œæ¯”è¾ƒï¼Œå……å½“è‡ªå·±çš„è´¨é‡ä¿è¯æ£€æŸ¥å‘˜ã€‚åœ¨æ­¤æ£€æŸ¥ä¹‹åï¼Œå®ƒå¯¹è‡ªå·±çš„è¿›åº¦åšå‡ºç®€å•ã€å…¬æ­£çš„åˆ¤å†³ï¼š"True"å¦‚æœå·¥ä½œæ»¡è¶³æ‰€æœ‰æ ‡å‡†ï¼Œæˆ–"False"å¦‚æœå®ƒæœªèƒ½æ»¡è¶³ã€‚

å¦‚æœåˆ¤å†³æ˜¯"False"ï¼ŒAI ä¸ä¼šæ”¾å¼ƒã€‚å®ƒè¿›å…¥ä¸€ä¸ªæ·±æ€ç†Ÿè™‘çš„ä¿®è®¢é˜¶æ®µï¼Œä½¿ç”¨æ¥è‡ªå…¶è‡ªæˆ‘æ‰¹è¯„çš„æ´å¯Ÿæ¥ç²¾ç¡®å®šä½å¼±ç‚¹å¹¶æ™ºèƒ½åœ°é‡å†™ä»£ç ã€‚è¿™ä¸ªèµ·è‰ã€è‡ªæˆ‘å®¡æŸ¥å’Œæ”¹è¿›çš„å¾ªç¯ç»§ç»­è¿›è¡Œï¼Œæ¯æ¬¡è¿­ä»£éƒ½æ—¨åœ¨æ›´æ¥è¿‘ç›®æ ‡ã€‚æ­¤è¿‡ç¨‹é‡å¤ï¼Œç›´åˆ° AI æœ€ç»ˆé€šè¿‡æ»¡è¶³æ¯ä¸ªè¦æ±‚è¾¾åˆ°"True"çŠ¶æ€ï¼Œæˆ–ç›´åˆ°è¾¾åˆ°é¢„å®šä¹‰çš„å°è¯•é™åˆ¶ï¼Œå°±åƒå¼€å‘è€…é’ˆå¯¹æˆªæ­¢æ—¥æœŸå·¥ä½œä¸€æ ·ã€‚ä¸€æ—¦ä»£ç é€šè¿‡æ­¤æœ€ç»ˆæ£€æŸ¥ï¼Œè„šæœ¬æ‰“åŒ…ç²¾ç‚¼çš„è§£å†³æ–¹æ¡ˆï¼Œæ·»åŠ æœ‰ç”¨çš„æ³¨é‡Šå¹¶å°†å…¶ä¿å­˜åˆ°å¹²å‡€çš„ã€æ–°çš„ Python æ–‡ä»¶ä¸­ï¼Œ ready for useã€‚

**æ³¨æ„äº‹é¡¹å’Œè€ƒè™‘å› ç´ ï¼š** é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ€§è¯´æ˜ï¼Œè€Œä¸æ˜¯ç”Ÿäº§å°±ç»ªçš„ä»£ç ã€‚å¯¹äºç°å®ä¸–ç•Œçš„åº”ç”¨ç¨‹åºï¼Œå¿…é¡»è€ƒè™‘å‡ ä¸ªå› ç´ ã€‚LLM å¯èƒ½æ— æ³•å®Œå…¨æŒæ¡ç›®æ ‡çš„é¢„æœŸå«ä¹‰ï¼Œå¹¶å¯èƒ½é”™è¯¯åœ°å°†å…¶æ€§èƒ½è¯„ä¼°ä¸ºæˆåŠŸã€‚å³ä½¿ç›®æ ‡è¢«å¾ˆå¥½åœ°ç†è§£ï¼Œæ¨¡å‹ä¹Ÿå¯èƒ½äº§ç”Ÿå¹»è§‰ã€‚å½“åŒä¸€ä¸ª LLM è´Ÿè´£ç¼–å†™ä»£ç å’Œåˆ¤æ–­å…¶è´¨é‡æ—¶ï¼Œå®ƒå¯èƒ½æ›´éš¾å‘ç°å®ƒæ­£æœç€é”™è¯¯çš„æ–¹å‘å‰è¿›ã€‚

æœ€ç»ˆï¼ŒLLM ä¸ä¼šé€šè¿‡é­”æ³•äº§ç”Ÿå®Œç¾çš„ä»£ç ï¼›æ‚¨ä»ç„¶éœ€è¦è¿è¡Œå’Œæµ‹è¯•ç”Ÿæˆçš„ä»£ç ã€‚æ­¤å¤–ï¼Œç®€å•ç¤ºä¾‹ä¸­çš„"ç›‘æ§"æ˜¯åŸºæœ¬çš„ï¼Œå¹¶åˆ›å»ºäº†è¿‡ç¨‹æ°¸è¿œè¿è¡Œçš„é£é™©ã€‚

```text
Act as an expert code reviewer with a deep commitment to producing clean, correct, and simple code. Your core mission is to eliminate code "hallucinations" by ensuring every suggestion is grounded in reality and best practices. When I provide you with a code snippet, I want you to: -- Identify and Correct Errors: Point out any logical flaws, bugs, or potential runtime errors. -- Simplify and Refactor: Suggest changes that make the code more readable, efficient, and maintainable without sacrificing correctness. -- Provide Clear Explanations: For every suggested change, explain why it is an improvement, referencing principles of clean code, performance, or security. -- Offer Corrected Code: Show the "before" and "after" of your suggested changes so the improvement is clear. Your feedback should be direct, constructive, and always aimed at improving the quality of the code.
```

æ›´å¥å£®çš„æ–¹æ³•æ¶‰åŠé€šè¿‡ä¸ºæ™ºèƒ½ä½“å›¢é˜Ÿåˆ†é…ç‰¹å®šè§’è‰²æ¥åˆ†ç¦»è¿™äº›å…³æ³¨ç‚¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä½¿ç”¨ Gemini æ„å»ºäº†ä¸€ä¸ªä¸ªäºº AI æ™ºèƒ½ä½“å›¢é˜Ÿï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰ç‰¹å®šè§’è‰²ï¼š

* åŒè¡Œç¨‹åºå‘˜ï¼šå¸®åŠ©ç¼–å†™å’Œå¤´è„‘é£æš´ä»£ç ã€‚  
* ä»£ç å®¡æŸ¥è€…ï¼šæ•è·é”™è¯¯å¹¶å»ºè®®æ”¹è¿›ã€‚  
* æ–‡æ¡£ç¼–å†™è€…ï¼šç”Ÿæˆæ¸…æ™°ç®€æ´çš„æ–‡æ¡£ã€‚  
* æµ‹è¯•ç¼–å†™è€…ï¼šåˆ›å»ºå…¨é¢çš„å•å…ƒæµ‹è¯•ã€‚  
* æç¤ºæ”¹è¿›è€…ï¼šä¼˜åŒ–ä¸ AI çš„äº¤äº’ã€‚

åœ¨æ­¤å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­ï¼Œä»£ç å®¡æŸ¥è€…ï¼ˆä½œä¸ºä¸ç¨‹åºå‘˜æ™ºèƒ½ä½“åˆ†ç¦»çš„å®ä½“ï¼‰å…·æœ‰ç±»ä¼¼äºç¤ºä¾‹ä¸­æ³•å®˜çš„æç¤ºï¼Œè¿™æ˜¾è‘—æ”¹å–„äº†å®¢è§‚è¯„ä¼°ã€‚è¿™ç§ç»“æ„è‡ªç„¶å¯¼è‡´æ›´å¥½çš„å®è·µï¼Œå› ä¸ºæµ‹è¯•ç¼–å†™è€…æ™ºèƒ½ä½“å¯ä»¥æ»¡è¶³ä¸ºåŒè¡Œç¨‹åºå‘˜ç”Ÿæˆçš„ä»£ç ç¼–å†™å•å…ƒæµ‹è¯•çš„éœ€æ±‚ã€‚

æˆ‘å°†æ·»åŠ è¿™äº›æ›´å¤æ‚çš„æ§åˆ¶å¹¶ä½¿ä»£ç æ›´æ¥è¿‘ç”Ÿäº§å°±ç»ªçš„ä»»åŠ¡ç•™ç»™æ„Ÿå…´è¶£çš„è¯»è€…ã€‚

## æ¦‚è§ˆ

**ä»€ä¹ˆ**ï¼šAI æ™ºèƒ½ä½“é€šå¸¸ç¼ºä¹æ˜ç¡®çš„æ–¹å‘ï¼Œé˜»æ­¢å®ƒä»¬åœ¨ç®€å•çš„ã€ååº”æ€§ä»»åŠ¡ä¹‹å¤–æœ‰ç›®çš„åœ°è¡ŒåŠ¨ã€‚æ²¡æœ‰å®šä¹‰çš„ç›®æ ‡ï¼Œå®ƒä»¬æ— æ³•ç‹¬ç«‹å¤„ç†å¤æ‚çš„ã€å¤šæ­¥éª¤çš„é—®é¢˜æˆ–ç¼–æ’å¤æ‚çš„å·¥ä½œæµã€‚æ­¤å¤–ï¼Œæ²¡æœ‰å›ºæœ‰çš„æœºåˆ¶æ¥ç¡®å®šå®ƒä»¬çš„è¡ŒåŠ¨æ˜¯å¦æ­£åœ¨å¯¼è‡´æˆåŠŸçš„ç»“æœã€‚è¿™é™åˆ¶äº†å®ƒä»¬çš„è‡ªä¸»æ€§ï¼Œå¹¶é˜»æ­¢å®ƒä»¬åœ¨åŠ¨æ€çš„ã€ç°å®ä¸–ç•Œçš„åœºæ™¯ä¸­çœŸæ­£æœ‰æ•ˆï¼Œå…¶ä¸­ä»…ä»…æ‰§è¡Œä»»åŠ¡æ˜¯ä¸å¤Ÿçš„ã€‚

**ä¸ºä»€ä¹ˆï¼š** ç›®æ ‡è®¾ç½®å’Œç›‘æ§æ¨¡å¼é€šè¿‡å°†ç›®çš„æ„Ÿå’Œè‡ªæˆ‘è¯„ä¼°åµŒå…¥æ™ºèƒ½ä½“ç³»ç»Ÿæ¥æä¾›æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆã€‚å®ƒæ¶‰åŠä¸ºæ™ºèƒ½ä½“è¦å®ç°çš„æ˜ç¡®ã€å¯è¡¡é‡çš„ç›®æ ‡è¿›è¡Œæ˜ç¡®å®šä¹‰ã€‚åŒæ—¶ï¼Œå®ƒå»ºç«‹äº†ç›‘æ§æœºåˆ¶ï¼ŒæŒç»­è·Ÿè¸ªæ™ºèƒ½ä½“çš„è¿›åº¦å’Œå…¶ç¯å¢ƒçŠ¶æ€ä¸è¿™äº›ç›®æ ‡çš„å…³ç³»ã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªå…³é”®çš„åé¦ˆå¾ªç¯ï¼Œä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿè¯„ä¼°å…¶æ€§èƒ½ã€çº æ­£å…¶è·¯çº¿ï¼Œå¹¶åœ¨åç¦»æˆåŠŸè·¯å¾„æ—¶è°ƒæ•´å…¶è®¡åˆ’ã€‚é€šè¿‡å®ç°æ­¤æ¨¡å¼ï¼Œå¼€å‘è€…å¯ä»¥å°†ç®€å•çš„ååº”æ€§æ™ºèƒ½ä½“è½¬å˜ä¸ºèƒ½å¤Ÿè‡ªä¸»å’Œå¯é è¿è¡Œçš„ä¸»åŠ¨ã€ç›®æ ‡å¯¼å‘çš„ç³»ç»Ÿã€‚

**ç»éªŒæ³•åˆ™ï¼š** å½“ AI æ™ºèƒ½ä½“å¿…é¡»è‡ªä¸»æ‰§è¡Œå¤šæ­¥ä»»åŠ¡ã€é€‚åº”åŠ¨æ€æ¡ä»¶å¹¶åœ¨æ²¡æœ‰æŒç»­äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹å¯é åœ°å®ç°ç‰¹å®šã€é«˜çº§ç›®æ ‡æ—¶ï¼Œä½¿ç”¨æ­¤æ¨¡å¼ã€‚

**å¯è§†åŒ–æ‘˜è¦ï¼š**

![Goal Design Pattern](../assets/Goal_Design_Pattern.png)

å›¾ 2ï¼šç›®æ ‡è®¾è®¡æ¨¡å¼

## å…³é”®è¦ç‚¹

å…³é”®è¦ç‚¹åŒ…æ‹¬ï¼š

* ç›®æ ‡è®¾ç½®å’Œç›‘æ§ä¸ºæ™ºèƒ½ä½“é…å¤‡ç›®çš„å’Œè·Ÿè¸ªè¿›åº¦çš„æœºåˆ¶ã€‚  
* ç›®æ ‡åº”è¯¥æ˜¯å…·ä½“çš„ã€å¯è¡¡é‡çš„ã€å¯å®ç°çš„ã€ç›¸å…³çš„å’Œæœ‰æ—¶é™çš„ï¼ˆSMARTï¼‰ã€‚  
* æ˜ç¡®å®šä¹‰æŒ‡æ ‡å’ŒæˆåŠŸæ ‡å‡†å¯¹äºæœ‰æ•ˆç›‘æ§è‡³å…³é‡è¦ã€‚  
* ç›‘æ§æ¶‰åŠè§‚å¯Ÿæ™ºèƒ½ä½“è¡ŒåŠ¨ã€ç¯å¢ƒçŠ¶æ€å’Œå·¥å…·è¾“å‡ºã€‚  
* æ¥è‡ªç›‘æ§çš„åé¦ˆå¾ªç¯å…è®¸æ™ºèƒ½ä½“é€‚åº”ã€ä¿®è®¢è®¡åˆ’æˆ–å‡çº§é—®é¢˜ã€‚  
* åœ¨ Google çš„ ADK ä¸­ï¼Œç›®æ ‡é€šå¸¸é€šè¿‡æ™ºèƒ½ä½“æŒ‡ä»¤ä¼ è¾¾ï¼Œç›‘æ§é€šè¿‡çŠ¶æ€ç®¡ç†å’Œå·¥å…·äº¤äº’å®Œæˆã€‚

## ç»“è®º

æœ¬ç« é‡ç‚¹å…³æ³¨ç›®æ ‡è®¾ç½®å’Œç›‘æ§çš„å…³é”®èŒƒå¼ã€‚æˆ‘å¼ºè°ƒäº†è¿™ä¸€æ¦‚å¿µå¦‚ä½•å°† AI æ™ºèƒ½ä½“ä»ä»…ä»…ååº”æ€§ç³»ç»Ÿè½¬å˜ä¸ºä¸»åŠ¨çš„ã€ç›®æ ‡é©±åŠ¨çš„å®ä½“ã€‚æ–‡æœ¬å¼ºè°ƒäº†å®šä¹‰æ˜ç¡®çš„ã€å¯è¡¡é‡çš„ç›®æ ‡å’Œå»ºç«‹ä¸¥æ ¼çš„ç›‘æ§ç¨‹åºä»¥è·Ÿè¸ªè¿›åº¦çš„é‡è¦æ€§ã€‚å®é™…åº”ç”¨å±•ç¤ºäº†æ­¤èŒƒå¼å¦‚ä½•æ”¯æŒè·¨å„ç§é¢†åŸŸï¼ˆåŒ…æ‹¬å®¢æˆ·æœåŠ¡å’Œæœºå™¨äººï¼‰çš„å¯é è‡ªä¸»æ“ä½œã€‚æ¦‚å¿µæ€§ç¼–ç ç¤ºä¾‹è¯´æ˜äº†è¿™äº›åŸåˆ™åœ¨ç»“æ„åŒ–æ¡†æ¶å†…çš„å®ç°ï¼Œä½¿ç”¨æ™ºèƒ½ä½“æŒ‡ä»¤å’ŒçŠ¶æ€ç®¡ç†æ¥æŒ‡å¯¼å’Œè¯„ä¼°æ™ºèƒ½ä½“å®ç°å…¶æŒ‡å®šç›®æ ‡çš„æƒ…å†µã€‚æœ€ç»ˆï¼Œä¸ºæ™ºèƒ½ä½“é…å¤‡åˆ¶å®šå’Œç›‘ç£ç›®æ ‡çš„èƒ½åŠ›æ˜¯æ„å»ºçœŸæ­£æ™ºèƒ½å’Œè´Ÿè´£ä»»çš„ AI ç³»ç»Ÿçš„åŸºæœ¬æ­¥éª¤ã€‚

## å‚è€ƒæ–‡çŒ®

1. SMART Goals Framework. [https://en.wikipedia.org/wiki/SMART\_criteria](https://en.wikipedia.org/wiki/SMART_criteria)
